<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Profile</title>
    <link rel="stylesheet" href="profile-page.component.scss">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
</head>

<body>
    <div class="container">
        <div class="sidebar">
            <img class="logo" src="/assets/logo-green.png">
            <nav>
                <ul>
                    <li><i class="material-icons">person</i> <a href="#profile" [ngClass]="{'active': isProfileActive}"
                            (click)="activateProfile()">Profile</a></li>
                    <li><i class="material-icons">dashboard</i> <a href="#dashboard" [class.active]="isDashboardActive"
                            (click)="activateDashboard()">Dashboard</a></li>
                    <li><i class="material-icons">business</i> <a href="#departments"
                            [class.active]="isDepartmentActive" (click)="activateDepartment()">Departments</a></li>
                    <li><i class="material-icons">exit_to_app</i> <a href="#logout" (click)="logout()">Log Out</a></li>
                </ul>
            </nav>
        </div>
        <div class="content">
            <div class="profile-section">
                <div class="profile-section">
                    <div class="profile-page-name">Profile</div>
                    <div class="user-profile">
                        <div class="avatar-container" (mouseenter)="isHovered = true" (mouseleave)="isHovered = false">
                            <img *ngIf="userAvatarUrl" [src]="userAvatarUrl" class="user-avatar" alt="User Avatar">
                            <div *ngIf="userAvatarUrl && isHovered" class="change-photo-overlay"
                                (click)="onProfileImageClick()" accept="image/*">
                                <i class="material-icons change-icon">camera_alt</i>
                            </div>
                        </div>
                        <div *ngIf="!isEditing; else editMode">
                            {{ username }}
                            <button (click)="editUsername()" class="profile-edit-btn" [class.active]="isEditing" >Edit</button>
                        </div>
                        <ng-template #editMode>
                            <input type="text" [(ngModel)]="editedUsername">
                            <button (click)="saveUsername()" class="profile-save-btn" [class.active]="isSaving" >Save</button>
                        </ng-template>
                    </div>
                </div>
            </div>
            <div class="sections">
                <div class="section" [class.active]="isPersonalActive" (click)="activatePersonal()">Personal</div>
                <div class="section" [class.active]="isDepartmentActive" (click)="activateDepartment()">Department</div>
                <div class="section" [class.active]="isSalaryActive" (click)="activateSalary()">Salary</div>
            </div>
            <div class="personal-data" *ngIf="isPersonalInfoActive">
                <div class="data-row" *ngFor="let field of personalInfoFields">
                    <div class="column">
                        <div class="label">{{ field.label }}:</div>
                    </div>
                    <div class="column">
                        <div *ngIf="!field.isEditing" class="value">{{ field.value }}</div>
                        <div *ngIf="field.isEditing" class="input-container">
                            <input type="text" [(ngModel)]="field.editedValue" class="edit-input">
                            <button (click)="saveFieldData(field)" class="save-btn">Save</button>
                        </div>
                    </div>
                    <div class="column">
                        <button (click)="editFieldData(field)" class="edit-btn">Edit</button>
                    </div>
                </div>
                <button (click)="addNewPersonalField()">Add New Field</button>
            </div>
            <div class="department-data" *ngIf="isDepartmentInfoActive">
                <div class="data-row" *ngFor="let field of departmentFields">
                    <div class="column">
                        <div class="label">{{ field.label }}:</div>
                    </div>
                    <div class="column">
                        <div *ngIf="!field.isEditing" class="value">{{ field.value }}</div>
                        <div *ngIf="field.isEditing" class="input-container">
                            <input type="text" [(ngModel)]="field.editedValue" class="edit-input">
                            <button (click)="saveFieldData(field)" class="save-btn">Save</button>
                        </div>
                    </div>
                    <div class="column">
                        <button (click)="editFieldData(field)" class="edit-btn">Edit</button>
                    </div>
                </div>
                <button (click)="addNewDepartmentField()">Add New Field</button>
            </div>
            <div class="salary-data" *ngIf="isSalaryInfoActive">
                <div class="data-row" *ngFor="let field of salaryFields">
                    <div class="column">
                        <div class="label">{{ field.label }}:</div>
                    </div>
                    <div class="column">
                        <div *ngIf="!field.isEditing" class="value">{{ field.value }}</div>
                        <div *ngIf="field.isEditing" class="input-container">
                            <input type="text" [(ngModel)]="field.editedValue" class="edit-input">
                            <button (click)="saveFieldData(field)" class="save-btn">Save</button>
                        </div>
                    </div>
                    <div class="column">
                        <button (click)="editFieldData(field)" class="edit-btn">Edit</button>
                    </div>
                </div>
                <button (click)="addNewSalaryField()">Add New Field</button>
            </div>
        </div>
    </div>
</body>

</html>